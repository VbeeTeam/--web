<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>自动登录</title>
<style type="text/css">
	*{
		margin:0;
		padding:0;
	}
	#bigBox{
		position:relative;
		width:500px;
		height:500px;
		background:url(images/small.jpg) no-repeat;
		background-size:500px 500px;
	}
	#mirrorBox{
		position:absolute;
		width:100px;
		height:100px;
		background-color:pink;
		opacity:0.5;
		display:none;
	}
	#showBox{
		position:absolute;
		left:510px;
		top:0px;
		width:300px;
		height:300px;
		border:1px solid black;
		background:url(images/small.jpg) no-repeat;
		background-size:1500px 1500px;
	/*	background-position:-100px -200px;*/
		display:none;
	}
</style>
</head>
<body>
	<div id="bigBox">
		<div id="mirrorBox">		
		</div>
		<div id="showBox">
		</div>
	</div>
</body>	
</html>
<script type="text/javascript">
function $(id){
	return document.getElementById(id);
}	
window.onload=function(){
	$("bigBox").onmouseover = function(event){
		let evt = event || window.event;
		//鼠标进入showBox时，不应该显示
		// if(evt.target==$("bigBox") || evt.target==$("mirrorBox")){
			$("mirrorBox").style.display="block";
			$("showBox").style.display="block";
		// }
	}
	$("bigBox").onmouseout = function(event){
		let evt = event || window.event;
		$("mirrorBox").style.display="none";
		$("showBox").style.display="none";
	}
	$("bigBox").onmousemove = function(event){
		let evt = event || window.event;
		//1、数据
		//1)、计算遮罩层在bigbox盒子上移动的left、top，让鼠标始终在遮罩层中间位置
		let left1 = evt.pageX-$("bigBox").offsetLeft-$("mirrorBox").offsetWidth/2;
		let top1 = evt.pageY-$("bigBox").offsetTop-$("mirrorBox").offsetHeight/2;
        console.log(left1,top1);
		//2)、判断边界让遮罩层在盒子内移动
		if(left1<=0){
			left1=0;
		}else if(left1>$("bigBox").offsetWidth-$("mirrorBox").offsetWidth){
			left1 = $("bigBox").offsetWidth-$("mirrorBox").offsetWidth;
		}
		if(top1<=0){
			top1=0;
		}else if(top1>$("bigBox").offsetHeight-$("mirrorBox").offsetHeight){
			top1 = $("bigBox").offsetHeight-$("mirrorBox").offsetHeight;
		}
		//2、外观
        
		$("mirrorBox").style.left = left1+"px";
		$("mirrorBox").style.top = top1+"px";
		$("showBox").style.backgroundPosition=(-1*3*left1)+"px "+(-1*3*top1)+"px";
	}
}
</script>